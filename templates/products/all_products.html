{% extends 'base.html' %}
{% block content %}
<section id="filter-search"></section>
<section id="all-products">
    {% include "partials/_sky.html" %}
    <!-- <div class="text-center d-flex justify-content-center">
        <p class="heading-paragraph">Bestsellers</p>
    </div> -->
    <div class="container">
        <div class="row justify-content-center">
            {% for product in all_products %}
            <div class="col-auto mb-3">
                <div class="card product-card">
                    <img class="card-img-top" src="{{ product.photo_main.url }}" alt="Card image cap">
                    <div class="card-img-overlay">
                        {% if product.product_type.types == "Clothes" %}
                            {% if product.total_cloths_stock == 0 %}
                                <h2>
                                    <div class="badge badge-secondary">SOLD OUT!</div>
                                </h2>
                            {% else %}
                                <h2>
                                    <div class="badge badge-secondary">£{{ product.price}}</div>
                                </h2>
                            {% endif %}
                        {% elif product.stock == 0 %}
                            <h2>
                                <div class="badge badge-secondary">SOLD OUT!</div>
                            </h2>
                        {% else %}
                            <h2>
                                <div class="badge badge-secondary">£{{ product.price }}</div>
                            </h2>
                        {% endif %}
                    </div>
                    <div class="card-body d-flex flex-column">
                        <h6 class="card-title">{{ product.name }}</h6>
                        <hr class="hr-card">
                        <p class="card-text">{{ product.short_description }}</p>
                        <hr class="hr-card">
                        <form action="#" method="POST">
                            {% csrf_token %}
                            {% if product.product_type.types == "Clothes" %}
                            <div class="form-row">
                                <div class="col form-group text-left">
                                    <!-- Qunatity -->
                                    <label for="first_name">Qunatity</label>
                                    <input type="number" min="1" max="99" name="first_name" class="form-control" value="1" required>
                                </div>
                                <div class="col form-group text-left">
                                    <!-- Size -->
                                    <span>Size</span>
                                    <select class="browser-default custom-select">
                                        <option value="" disabled selected>Pick size</option>
                                        {% for size in size_chart %}
                                            <option value="{{size.id}}" 
                                            {% if product.stock_xs == 0 and size.size == 'XS' %}
                                                disabled
                                            {% elif product.stock_s == 0 and size.size == 'S' %}
                                                disabled
                                            {% elif product.stock_m == 0 and size.size == 'M' %}
                                                disabled
                                            {% elif product.stock_l == 0 and size.size == 'L' %}
                                                disabled
                                            {% elif product.stock_xl == 0 and size.size == 'XL' %}
                                                disabled
                                            {% elif product.stock_xxl == 0 and size.size == 'XXL' %}
                                                disabled
                                            {% elif product.stock_XXXL == 0 and size.size == 'XXXL' %}
                                                disabled
                                            {% else %}
                                            {% endif %}
                                            >{{size.size}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            {% else %}
                            <div class="form-row">
                                <div class="col form-group text-left">
                                    <!-- Qunatity -->
                                    <label for="first_name">Qunatity</label>
                                    <input type="number" min="1" max="99" name="first_name" class="form-control" value="1" required>
                                </div>
                            </div>
                            {% endif %}
                            <a href="#" class="mt-auto btn btn-secondary btn-block">ADD TO CART</a>
                        </form>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}
